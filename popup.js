$("document").ready(function(){
  initialize_popup($(".text"));

});

function initialize_popup(div){
  lingapp_button_close = 'data:image/png;base64,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'
  lingapp_button_close2 = 'data:image/gif;base64,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';
  lingapp_lupa = 'data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0YyN0E0NjM2NzcwMTFFMUE5OEZGRjU5Nzg5MzUxNUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0YyN0E0NjQ2NzcwMTFFMUE5OEZGRjU5Nzg5MzUxNUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3RjI3QTQ2MTY3NzAxMUUxQTk4RkZGNTk3ODkzNTE1RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3RjI3QTQ2MjY3NzAxMUUxQTk4RkZGNTk3ODkzNTE1RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvJ4+5wAAAMZSURBVHjalFNLTxNRFD7zKDEtLbQUKaXl2SLQImiIbozdamRh8IEWdeXKtYlLd/4FQ9y4MnHjwphoNCGgiRp5idCCrURpKS12Soc+KPP23OEhWDB6JjO5c+693/2+75xLDQ8Pw2Fx6VoQNIBq/JxRVaWKppkSpj/gm3r29Im2dy17EMCV60MEwCSJ4sOVRGJoNZWkJUkChmGg9midWu9seDcwGLyMSzkEPBwIKKoyv85HZqam6gVhc99UsZCn47EfAV93T8JsNvsxFSV5+k+Mq8EblLi5+fbz5ES9KAjA0AzU1TmgzeOFeqcTWbGgyDLMzUxXlEql9+cu9JsPBKIo6ti3aOSEJKIUloGTfX3Q5fPBaioFLncj9J06DRUVFaCqKixGI3aUez8QCJQDqYpym0v/RESApqZmcDgcW5KKBSAMbTYrtHd06rl8LgeKqgVxyJR5hPt9xFgKH1uNDV6/egmapun/oblZCIdC4PP7tw5VFcC1VoZlj5SbTYGC8vShhvRdLjeIkgiJRAKsViuYTCZgWZYcSCqrV1IUFEOZNJZhnxuNRn0cj8Wht7cHujo79Y1utxvZHIc0kY4Z4pWBZdPIuFgGRDP0aEtrq76R49IwOTmlG0vkmC0WWJgP4wExfW2dw0kq+AaH0j5pwZu3qnief0E21tjtCMRBPB6DZHIFWIMB5IWvukwSlWYzNDY3JQvr/IOxsbHfDYn9Y8pms7NTE+NuGfvE5/MDkRiPx9FQWX81fIh/NfZa0hJ8js/eQR8Xdzsb7xRhEsImbJCxYiTCoTno8nfD2UBbgc9mjZuCQBuQlcViyaEnH9fXMneR+Sxho9cozecNhUL+y/T4pw5ZlrYLR0GDywXe9vYov5YZYFmDQNGUB/3YUFXtu6LIy6T6OyDbjLTzkfn5DkmWgNpOOvAqtHm90TWOu6hpanhkZAR27tRhwSJNpygKuwm82eBBED7D9eNcZO+pfwsirXYtwy0kE8u2aqtNtdvt4WKOH0SQ8L+CkGA8Lc0bXo/nUbXVmjEw9GOhtHFvdHQ0sbS0BP8TvwQYAERtdisCOcLNAAAAAElFTkSuQmCC';
  lingapp_speaker = 'data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAQCAYAAAD0xERiAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkY0MUJDREI2NzcwMTFFMUE1NDVDQUZDRTI2NjI5QkQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkY0MUJDREM2NzcwMTFFMUE1NDVDQUZDRTI2NjI5QkQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2RjQxQkNEOTY3NzAxMUUxQTU0NUNBRkNFMjY2MjlCRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2RjQxQkNEQTY3NzAxMUUxQTU0NUNBRkNFMjY2MjlCRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pr1WKfAAAALWSURBVHjafFNbTxNREJ6z7W6vtMVqW+iClBYs6oOoNCQmYv8CiaiExD/AL+BnGBPDg+HJxBiiAj5r+qCJD8aES1GwtEWwt91SoGzZ7s3ZdmlouMxmuuecnfm+mTNfyezsLFxmjyenQNM0Ahr4cFucf/tGuyiWugxoAoEIwOBxrZbNpFN5qS7OnHwbfzppGn8y2ZZPSpVD/W1Ft+uZFCFH6CK6Q5KkV+mt1LPtbNbMMDTcH4l9398rj/q6Wdd+pZJUNU11ud0PJVHMLH18D2YEGc3ndhPCkcAQBHN7PFWfz/+iVCpO/04mXUJNMHgZIIRQNpvdSVEkVi7zwUwqBbfvDP902O1RDCjoYFMbv9YZWZb1wkAPViRpZm11pa1lnYhhmJCsKHwhl2P6wxGQJQnW11Y990ZiS4/i8VirZ3IqUVEU48x4CGl8N5lMDAIwSSTazmYgMngD9MlwXGnYbKZD5w7gJLnxQ06ICNTrosvr9cIAgmTTW424K96rUOZ5xKIn2qcBZ3fkVJscx8HK8jIEuruwehVE8RgcTifURREok+nWpdI4z5pXYFBozatoLABc5tOB7WrU2mrVd26XGwKBLigWi82BWCwgCFUcjAVURdk5tzJUfBNY09cGCS6cHR1VQRAgubYKPb19jTvjOR48nZ0qCvoHdbYqDSiKMlbNBwxwbPEYhSyHIwMQCochg0NQVAWu+f2cIsuLmKV97r0eUoNsD+jeFwqrKNpcdOimStN0i0h3nGYau7vr9wfmdnf+wtafTZRHVJVF8TV2w5M8vwfCwf4DrHmINFuUsOQFm93RzVitnzY3NkL53D+wWm3G34kf9QV7PDxXyqmqxlgZerF2VH2aSCRE88L8O538q+EtGxsbq8iyFOkPh58HWfZlIZ+3q5oqGHdaMQH0oWCjCPQNjyT93HyRBJBJf6nxeHyOtlg+sCw7LRwefDHOdSsY3rL/AgwAZntJQa/SIdMAAAAASUVORK5CYII=';
  lingolet = {
    // "app_url": "lingapp.com"
    "app_url" : "lingapp.com"
  }

  $(div).append(add_html());
  bindDblclickHandler(div);
  bindclick();
}
(function($){jQuery.fn.compare=function(element){try{element=element.jquery?element[0]:element}catch(e){return null}if(window.HTMLElement){var s=HTMLElement.prototype.toString.call(element);if(s=="[xpconnect wrapped native prototype]"||s=="[object XULElement]"||s==="[object Window]")return null}if(this[0].compareDocumentPosition)return this[0].compareDocumentPosition(element);if(this[0]==document&&element!=document)return 8;var number=(this[0]!==element&&this[0].contains(element)&&16)+(this[0]!=element&& element.contains(this[0])&&8),docEl=document.documentElement;if(this[0].sourceIndex){number+=this[0].sourceIndex<element.sourceIndex&&4;number+=this[0].sourceIndex>element.sourceIndex&&2;number+=(this[0].ownerDocument!==element.ownerDocument||this[0]!=docEl&&this[0].sourceIndex<=0||element!=docEl&&element.sourceIndex<=0)&&1}return number}})(jQuery); (function($){$.fn.range=function(){return $.Range(this[0])};var convertType=function(type){return type.replace(/([a-z])([a-z]+)/gi,function(all,first,next){return first+next.toLowerCase()}).replace(/_/g,"")},reverse=function(type){return type.replace(/^([a-z]+)_TO_([a-z]+)/i,function(all,first,last){return last+"_TO_"+first})},getWindow=function(element){return element?element.ownerDocument.defaultView||element.ownerDocument.parentWindow:window},bisect=function(el,start,end){if(end-start==1)return}, support={};$.Range=function(range){if(this.constructor!==$.Range)return new $.Range(range);if(range&&range.jquery)range=range[0];if(!range||range.nodeType){this.win=getWindow(range);if(this.win.document.createRange)this.range=this.win.document.createRange();else this.range=this.win.document.body.createTextRange();if(range)this.select(range)}else if(range.clientX!=null||range.pageX!=null||range.left!=null)this.moveToPoint(range);else if(range.originalEvent&&range.originalEvent.touches&&range.originalEvent.touches.length)this.moveToPoint(range.originalEvent.touches[0]); else if(range.originalEvent&&range.originalEvent.changedTouches&&range.originalEvent.changedTouches.length)this.moveToPoint(range.originalEvent.changedTouches[0]);else this.range=range};$.Range.current=function(el){var win=getWindow(el),selection;if(win.getSelection){selection=win.getSelection();return new $.Range(selection.rangeCount?selection.getRangeAt(0):win.document.createRange())}else return new $.Range(win.document.selection.createRange())};$.extend($.Range.prototype,{moveToPoint:function(point){var clientX= point.clientX,clientY=point.clientY;if(!clientX){var off=scrollOffset();clientX=(point.pageX||point.left||0)-off.left;clientY=(point.pageY||point.top||0)-off.top}if(support.moveToPoint){this.range=$.Range().range;this.range.moveToPoint(clientX,clientY);return this}var parent=document.elementFromPoint(clientX,clientY);for(var n=0;n<parent.childNodes.length;n++){var node=parent.childNodes[n];if(node.nodeType===3||node.nodeType===4){var range=$.Range(node),length=range.toString().length;for(var i=1;i< length+1;i++){var rect=range.end(i).rect();if(rect.left<=clientX&&rect.left+rect.width>=clientX&&rect.top<=clientY&&rect.top+rect.height>=clientY){range.start(i-1);this.range=range.range;return this}}}}var previous;iterate(parent.childNodes,function(textNode){var range=$.Range(textNode);if(range.rect().top>point.clientY)return false;else previous=range});if(previous){previous.start(previous.toString().length);this.range=previous.range}else this.range=$.Range(parent).range},window:function(){return this.win|| window},overlaps:function(elRange){if(elRange.nodeType)elRange=$.Range(elRange).select(elRange);var startToStart=this.compare("START_TO_START",elRange),endToEnd=this.compare("END_TO_END",elRange);if(startToStart<=0&&endToEnd>=0)return true;if(startToStart>=0&&this.compare("START_TO_END",elRange)<=0)return true;if(this.compare("END_TO_START",elRange)>=0&&endToEnd<=0)return true;return false},collapse:function(toStart){this.range.collapse(toStart===undefined?true:toStart);return this},toString:function(){return typeof this.range.text== "string"?this.range.text:this.range.toString()},start:function(set){if(set===undefined)if(this.range.startContainer)return{container:this.range.startContainer,offset:this.range.startOffset};else{var start=this.clone().collapse().parent();var startRange=$.Range(start).select(start).collapse();startRange.move("END_TO_START",this);return{container:start,offset:startRange.toString().length}}else{if(this.range.setStart)if(typeof set=="number")this.range.setStart(this.range.startContainer,set);else if(typeof set== "string"){var res=callMove(this.range.startContainer,this.range.startOffset,parseInt(set,10));this.range.setStart(res.node,res.offset)}else this.range.setStart(set.container,set.offset);else if(typeof set=="string")this.range.moveStart("character",parseInt(set,10));else{var container=this.start().container,offset;if(typeof set=="number")offset=set;else{container=set.container;offset=set.offset}var newPoint=$.Range(container).collapse();newPoint.range.move(offset);this.move("START_TO_START",newPoint)}return this}}, end:function(set){if(set===undefined)if(this.range.startContainer)return{container:this.range.endContainer,offset:this.range.endOffset};else{var end=this.clone().collapse(false).parent(),endRange=$.Range(end).select(end).collapse();endRange.move("END_TO_END",this);return{container:end,offset:endRange.toString().length}}else{if(this.range.setEnd)if(typeof set=="number")this.range.setEnd(this.range.endContainer,set);else if(typeof set=="string"){var res=callMove(this.range.endContainer,this.range.endOffset, parseInt(set,10));this.range.setEnd(res.node,res.offset)}else this.range.setEnd(set.container,set.offset);else if(typeof set=="string")this.range.moveEnd("character",parseInt(set,10));else{var container=this.end().container,offset;if(typeof set=="number")offset=set;else{container=set.container;offset=set.offset}var newPoint=$.Range(container).collapse();newPoint.range.move(offset);this.move("END_TO_START",newPoint)}return this}},parent:function(){if(this.range.commonAncestorContainer)return this.range.commonAncestorContainer; else{var parentElement=this.range.parentElement(),range=this.range;iterate(parentElement.childNodes,function(txtNode){if($.Range(txtNode).range.inRange(range)){parentElement=txtNode;return false}});return parentElement}},rect:function(from){var rect=this.range.getBoundingClientRect();if(!rect.height&&!rect.width)rect=this.range.getClientRects()[0];if(from==="page"){var off=scrollOffset();rect=$.extend({},rect);rect.top+=off.top;rect.left+=off.left}return rect},rects:function(from){var rects=$.map($.makeArray(this.range.getClientRects()).sort(function(rect1, rect2){return rect2.width*rect2.height-rect1.width*rect1.height}),function(rect){return $.extend({},rect)}),i=0,j,len=rects.length;while(i<rects.length){var cur=rects[i],found=false;j=i+1;while(j<rects.length)if(withinRect(cur,rects[j]))if(!rects[j].width)rects.splice(j,1);else{found=rects[j];break}else j++;if(found)rects.splice(i,1);else i++}if(from=="page"){var off=scrollOffset();return $.each(rects,function(ith,item){item.top+=off.top;item.left+=off.left})}return rects}});(function(){var fn=$.Range.prototype, range=$.Range().range;fn.compare=range.compareBoundaryPoints?function(type,range){return this.range.compareBoundaryPoints(this.window().Range[reverse(type)],range.range)}:function(type,range){return this.range.compareEndPoints(convertType(type),range.range)};fn.move=range.setStart?function(type,range){var rangesRange=range.range;switch(type){case "START_TO_END":this.range.setStart(rangesRange.endContainer,rangesRange.endOffset);break;case "START_TO_START":this.range.setStart(rangesRange.startContainer, rangesRange.startOffset);break;case "END_TO_END":this.range.setEnd(rangesRange.endContainer,rangesRange.endOffset);break;case "END_TO_START":this.range.setEnd(rangesRange.startContainer,rangesRange.startOffset);break}return this}:function(type,range){this.range.setEndPoint(convertType(type),range.range);return this};var cloneFunc=range.cloneRange?"cloneRange":"duplicate",selectFunc=range.selectNodeContents?"selectNodeContents":"moveToElementText";fn.clone=function(){return $.Range(this.range[cloneFunc]())}; fn.select=range.selectNodeContents?function(el){if(!el){var selection=this.window().getSelection();selection.removeAllRanges();selection.addRange(this.range)}else this.range.selectNodeContents(el);return this}:function(el){if(!el)this.range.select();else if(el.nodeType===3){var parent=el.parentNode,start=0,end;iterate(parent.childNodes,function(txtNode){if(txtNode===el){end=start+txtNode.nodeValue.length;return false}else start=start+txtNode.nodeValue.length});this.range.moveToElementText(parent); this.range.moveEnd("character",end-this.range.text.length);this.range.moveStart("character",start)}else this.range.moveToElementText(el);return this}})();var iterate=function(elems,cb){var elem,start;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){if(cb(elem)===false)return false}else if(elem.nodeType!==8)if(iterate(elem.childNodes,cb)===false)return false}},isText=function(node){return node.nodeType===3||node.nodeType===4},iteratorMaker=function(toChildren,toNext){return function(node, mustMoveRight){if(node[toChildren]&&!mustMoveRight)return isText(node[toChildren])?node[toChildren]:arguments.callee(node[toChildren]);else if(node[toNext])return isText(node[toNext])?node[toNext]:arguments.callee(node[toNext]);else if(node.parentNode)return arguments.callee(node.parentNode,true)}},getNextTextNode=iteratorMaker("firstChild","nextSibling"),getPrevTextNode=iteratorMaker("lastChild","previousSibling"),callMove=function(container,offset,howMany){if(isText(container))return move(container, offset+howMany);else{return container.childNodes[offset]?move(container.childNodes[offset],howMany):move(container.lastChild,howMany,true);return}},move=function(from,howMany){var mover=howMany<0?getPrevTextNode:getNextTextNode;howMany=Math.abs(howMany);if(!isText(from))from=mover(from);while(from&&howMany>=from.nodeValue.length){hasMany=howMany-from.nodeValue.length;from=mover(from)}return{node:from,offset:mover===getNextTextNode?howMany:from.nodeValue.length-howMany}},supportWhitespace,isWhitespace= function(el){if(supportWhitespace==null)supportWhitespace="isElementContentWhitespace"in el;return supportWhitespace?el.isElementContentWhitespace:el.nodeType===3&&""==el.data.trim()},within=function(rect,point){return rect.left<=point.clientX&&rect.left+rect.width>=point.clientX&&rect.top<=point.clientY&&rect.top+rect.height>=point.clientY},withinRect=function(outer,inner){return within(outer,{clientX:inner.left,clientY:inner.top})&&within(outer,{clientX:inner.left+inner.width,clientY:inner.top})&& within(outer,{clientX:inner.left,clientY:inner.top+inner.height})&&within(outer,{clientX:inner.left+inner.width,clientY:inner.top+inner.height})},scrollOffset=function(win){var win=win||window;doc=win.document.documentElement,body=win.document.body;return{left:(doc&&doc.scrollLeft||body&&body.scrollLeft||0)+(doc.clientLeft||0),top:(doc&&doc.scrollTop||body&&body.scrollTop||0)+(doc.clientTop||0)}};support.moveToPoint=!!$.Range().range.moveToPoint})(jQuery); (function($){var getWindow=function(element){return element?element.ownerDocument.defaultView||element.ownerDocument.parentWindow:window},getElementsSelection=function(el,win){var current=$.Range.current(el).clone(),entireElement=$.Range(el).select(el);if(!current.overlaps(entireElement))return null;if(current.compare("START_TO_START",entireElement)<1){startPos=0;current.move("START_TO_START",entireElement)}else{fromElementToCurrent=entireElement.clone();fromElementToCurrent.move("END_TO_START",current); startPos=fromElementToCurrent.toString().length}if(current.compare("END_TO_END",entireElement)>=0)endPos=entireElement.toString().length;else endPos=startPos+current.toString().length;return{start:startPos,end:endPos,width:endPos-startPos}},getSelection=function(el){var win=getWindow(el);if(el.selectionStart!==undefined){if(document.activeElement&&document.activeElement!=el&&el.selectionStart==el.selectionEnd&&el.selectionStart==0)return{start:el.value.length,end:el.value.length,width:0};return{start:el.selectionStart, end:el.selectionEnd,width:el.selectionEnd-el.selectionStart}}else if(win.getSelection)return getElementsSelection(el,win);else try{if(el.nodeName.toLowerCase()=="input"){var real=getWindow(el).document.selection.createRange(),r=el.createTextRange();r.setEndPoint("EndToStart",real);var start=r.text.length;return{start:start,end:start+real.text.length,width:real.text.length}}else{var res=getElementsSelection(el,win);if(!res)return res;var current=$.Range.current().clone(),r2=current.clone().collapse().range, r3=current.clone().collapse(false).range;r2.moveStart("character",-1);r3.moveStart("character",-1);if(res.startPos!=0&&r2.text=="")res.startPos+=2;if(res.endPos!=0&&r3.text=="")res.endPos+=2;return res}}catch(e){return{start:el.value.length,end:el.value.length,width:0}}},select=function(el,start,end){var win=getWindow(el);if(el.setSelectionRange)if(end===undefined){el.focus();el.setSelectionRange(start,start)}else{el.select();el.selectionStart=start;el.selectionEnd=end}else if(el.createTextRange){var r= el.createTextRange();r.moveStart("character",start);end=end||start;r.moveEnd("character",end-el.value.length);r.select()}else if(win.getSelection){var doc=win.document,sel=win.getSelection(),range=doc.createRange(),ranges=[start,end!==undefined?end:start];getCharElement([el],ranges);range.setStart(ranges[0].el,ranges[0].count);range.setEnd(ranges[1].el,ranges[1].count);sel.removeAllRanges();sel.addRange(range)}else if(win.document.body.createTextRange){var range=document.body.createTextRange();range.moveToElementText(el); range.collapse();range.moveStart("character",start);range.moveEnd("character",end!==undefined?end:start);range.select()}},replaceWithLess=function(start,len,range,el){if(typeof range[0]==="number"&&range[0]<len)range[0]={el:el,count:range[0]-start};if(typeof range[1]==="number"&&range[1]<=len)range[1]={el:el,count:range[1]-start}},getCharElement=function(elems,range,len){var elem,start;len=len||0;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){start=len;len+=elem.nodeValue.length; replaceWithLess(start,len,range,elem)}else if(elem.nodeType!==8)len=getCharElement(elem.childNodes,range,len)}return len};$.fn.selection=function(start,end){if(start!==undefined)return this.each(function(){select(this,start,end)});else return getSelection(this[0])};$.fn.selection.getCharElement=getCharElement})(jQuery);

function bindclick(){
  $(document).click(function (e) {
    if (!$('#dictionaryPopup').is(':visible') && $('#la-lingolet-miniPopup').is(':visible')) {
      $('#la-lingolet-miniPopup').hide();
    } else {
      $('#dictionaryPopup').hide();
    }

    if ($('#la-lingolet-translationsPopup').is(':visible') && $(e.target).attr('id') != '#la-lingolet-translationsPopup' && $(e.target).parents('#la-lingolet-translationsPopup').length < 1) {
      $('#la-lingolet-translationsPopup').hide();
    }

    if ($('#la-lingolet-popup-big-translation').is(':visible')) {
      $('#la-lingolet-popup-big-translation').hide();
    }
  });
}

function bindDblclickHandler(div) {
  $(div).bind('dblclick', function (e) {
    e.preventDefault();

    var whole_text = $(e.target).text();
    var selection = $(e.target).selection();
    var strSlc = whole_text.substring(0,selection.start - 1);
    var endSlc = whole_text.substring(selection.end);
    strSlc = strSlc.replace(/[^\.]+\.\s/g,'');
    endSlc = endSlc.replace(/\.[^\.]+/g,'');
    strSlc = $.trim(strSlc);
    endSlc = $.trim(endSlc);
    var word = whole_text.substring(selection.start, selection.end).trim();
    strSlc = strSlc.split(/([_\W])/);
    endSlc = endSlc.split(/([_\W])/);
    var phrases = '';
    if(strSlc[strSlc.length - 1].length > 0)
      phrases += '&phrases[]=' + strSlc[strSlc.length - 1].trim() + ' ' + word;
      if(endSlc[0].length > 0)
        phrases += '&phrases[]=' + word + ' ' + endSlc[0].trim();
        phrases = phrases.substring(1);
        if(word.length > 0){
          $.getScript('http://' + lingolet.app_url + '/plugin/query/phrases/pl/'+word+ '?' + phrases, function(data, textStatus, jqXHR){
            if(checkError(response.error) == true){
              $("#la-lingolet-translationsPopup").html(buildTranslatePopup(response.word.name, response.word.translation, ''));

              var new_start_selection = selection.start;
              var new_end_selection = selection.end;

              for(i = 0; i < response.phrases.length; i++){
                if(response.phrases[i].translation.length > 0){
                  $("#la-lingolet-translationsPopup").append(buildTranslatePopup(response.phrases[i].name, response.phrases[i].translation, 'phrase'));
                  if(response.phrases[i].name.trim().toLowerCase() == (strSlc[strSlc.length - 1].trim() + ' ' + word).trim().toLowerCase()){
                    new_start_selection = selection.end - response.phrases[i].name.length;
                  }else if(response.phrases[i].name.trim().toLowerCase() == (word + ' ' + endSlc[0].trim()).trim().toLowerCase() ){
                    new_end_selection = selection.start + response.phrases[i].name.length;
                  }
                }
              }

              $(e.target).selection(new_start_selection, new_end_selection);

              $("#la-lingolet-translationsPopup").show();
              $("#la-lingolet-translationsPopup, .translatePopup").show();
              setPopupPosition(e.pageY, e.pageX);

            }else{
              $("#la-lingolet-translationsPopup").html('<div class="lacss translatePopup"><div class="lacss noTranslation">nie znaleziono tłumaczenia</div></div>');
              $("#la-lingolet-translationsPopup, .translatePopup").show();
              setPopupPosition(e.pageY, e.pageX);
            }
          })
        }
      });
    }

    function buildTranslatePopup(word_name, word_translation, css_class){
      var res =  '<div class="lacss translatePopup ' + css_class + '">';
      res += '<div class="la-lingolet-check_word_box">';
      res += '<div class="transl-header">';
      res += '<h2 class="tp_checked_word">' + word_name + '</h2>';
      res += '</div>';
      res += '<div word="'+ word_name +'" class="addMemoWord">+ dodaj</div>';
      res += '<div class="lingolet-clear"></div>';
      res += '<p class="tp_word_translations">' + word_translation + '</p>';
      res += '</div>';
      res += '</div>';
      return res;
    }

    function checkError(code) {
      return true;
    }

    function setPopupPosition(positiony, positionx) {
      top_pos = positiony + 15;
      left_pos = positionx - 30;

      div_width = 330;
      window_width = $(window).width();

      if(left_pos + div_width > window_width)
        left_pos = window_width - div_width - 30;

        if(left_pos < 0)
          left_pos = 10;

          $('#la-lingolet-translationsPopup').css({
            position: 'absolute',
            top: (top_pos + 'px'),
            left: (left_pos + 'px')
          });
        }

        function add_html(){
          var html = "<div id='la-lingolet-translationsPopup'>\
          </div>\
          <div class='word-details'>\
          <div class='definitions'></div>\
          <div class='derived_forms'></div>\
          </div>";
          return html;
        }